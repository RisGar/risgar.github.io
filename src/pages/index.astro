---
// Component Imports
import MainHead from "../components/MainHead.astro"
import Button from "../components/Button.svelte"
import Nav from "../components/Nav.svelte"
import Footer from "../components/Footer.svelte"
import PortfolioPreview from "../components/PortfolioPreview.svelte"

const project = (await Astro.glob<Frontmatter>("./project/**/*.md"))
  .filter(({ frontmatter }) => Boolean(frontmatter.publishDate))
  .sort(
    (a, b) =>
      new Date(b.frontmatter.publishDate).valueOf() -
      new Date(a.frontmatter.publishDate).valueOf()
  )[0]

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/

// Service worker
import { registerSW } from "virtual:pwa-register"

registerSW({ immediate: true })
---

<html lang="en">
  <head>
    <MainHead />
  </head>

  <body>
    <Nav />
    <header class="max-w-[85vw] mx-auto relative overflow-hidden">
      <h1 class="font-medium text-light-red text-3xl mb-6 mt-0 md:text-7xl">
        Rishab Garg
      </h1>
      <div>
        <span
          class="relative inline-block font-bold text-dark-yellow bg-gutter-grey py-1 px-2 rounded z-10 md:text-lg"
          >üë©‚Äçüíª Developer
        </span>
        <span
          class="relative inline-block font-bold text-dark-yellow bg-gutter-grey py-1 px-2 rounded z-10 ml-4 md:text-lg"
          >üéì Student
        </span>
        <p class="text-xl mt-6 mb-0">Hobby progammer and high school student</p>
      </div>
    </header>

    <main class="max-w-[85vw] mx-auto px-8 my-8">
      <div class="grid gap-20 xl:grid-cols-[2fr_1fr]">
        <div class="section">
          <h3 class="font-medium text-4xl mt-16 mb-8">Latest Project</h3>
          <PortfolioPreview project={project} />
          <div class="text-center mt-8">
            <a href="/projects">
              <Button>View All</Button>
            </a>
          </div>
        </div>
        <div class="section">
          <h3 class="font-medium text-4xl mt-16 mb-8">About me</h3>
          <p class="leading-loose mb-4 text-lg">
            Hello! <br />
            I'm Rishab, and this is my website. (WIP)
          </p><p>
            <a href="/about">Read more</a>
          </p>
        </div>
      </div>
    </main>
    <Footer />
  </body>
</html>
